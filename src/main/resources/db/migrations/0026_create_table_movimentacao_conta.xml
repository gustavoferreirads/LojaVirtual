<?xml version="1.0" encoding="utf-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">
    <property name="LONG.VARCHAR" value="LONG VARCHAR" dbms="mysql" />
    <property name="LONG.VARCHAR" value="LONGVARCHAR" dbms="hsqldb" />
    <property name="LONG.VARCHAR" value="LONG VARCHAR" dbms="derby" />
    <property name="TIMESTAMP" value="TIMESTAMP" dbms="derby" />
    <property name="TIMESTAMP" value="TIMESTAMP(3)" dbms="mysql" />
    <property name="CURRENT_TIMESTAMP" value="CURRENT_TIMESTAMP" dbms="derby" />
    <property name="CURRENT_TIMESTAMP" value="NOW(3)" dbms="mysql" />


    <changeSet author="laas" id="26">
        <createTable  tableName="MOVIMENTO_FINANCEIRO">
            <column autoIncrement="true" name="ID_MOVIMENTO_FINANCEIRO" type="BIGINT"><constraints nullable="false" primaryKey="true"/></column>
            <column name="ID_CONTA" type="BIGINT"/>
            <column name="NF_VALOR_MOVIMENTO" type="NUMERIC(12,2)"><constraints nullable="false"/></column>
            <column name="CX_TIPO_MOEDA" type="BIGINT"/>
            <column name="CX_DESCRICAO_MOVIMENTO" type="BIGINT"/>
            <column name="ID_USUARIO" type="BIGINT"><constraints nullable="false"/></column>
            <column name="ID_CLIENTE_LAAS" type="BIGINT"><constraints nullable="false"/></column>
            <column name="TS_DATA_CADASTRO" type="${TIMESTAMP}"/>
            <column name="TS_ULT_MODIFICACAO" type="${TIMESTAMP}"> <constraints nullable="false"/></column>
        </createTable>

        <createTable  tableName="CONTA">
            <column autoIncrement="true" name="ID_CONTA" type="BIGINT"><constraints nullable="false" primaryKey="true"/></column>
            <column name="ID_MOVIMENTO_FINANCEIRO" type="BIGINT"><constraints nullable="false"/></column>
            <column name="ID_PLANO_CONTA" type="BIGINT"><constraints nullable="false"/></column>
            <column name="ID_CONTA_BANCARIA" type="BIGINT"><constraints nullable="false"/></column>
            <column name="NI_TIPO_OPERACAO" type="BIGINT"><constraints nullable="false"/></column>
            <column name="CX_CATEGORIA_MOVIMENTO" type="BIGINT"/>
            <column name="DT_VENCIMENTO" type="DATE"><constraints nullable="false"/></column>
            <column name="NI_SITUACAO" type="BIGINT"><constraints nullable="false"/></column>
            <column name="TX_ANOTACOES" type="VARCHAR(700)"/>
            <column name="FG_PAGO" type="SMALLINT"/>
            <column name="NI_TIPO_CONTA" type="SMALLINT"><constraints nullable="false"/></column>

            <!--CAMPO DO PAGAMENO -->
            <column name="NI_DOCUMENTO" type="BIGINT"/>
            <column name="CX_TIPO_DOCUMENTO" type="BIGINT"/>
            <column name="NF_VALOR_JUROS" type="NUMERIC(12,2)"/>
            <column name="NF_VALOR_MULTA" type="NUMERIC(12,2)"/>
            <column name="NF_VALOR_DESCONTO" type="NUMERIC(12,2)"/>
            <column name="NF_VALOR_TOTAL_PAGO" type="NUMERIC(12,2)"/>
            <column name="DT_PAGAMENTO" type="DATE"/>
            <column name="ID_USUARIO_PAGAMENTO" type="BIGINT"/>
            <column name="NI_FORMA_DE_PAGAMENTO" type="BIGINT"/>
            <column name="TX_ANOTACOES_PAGAMENTO" type="VARCHAR(700)"/>
            <column name="DT_OPERACAO" type="DATE"/>
            <column name="TS_DATA_CADASTRO" type="${TIMESTAMP}"/>
            <column name="ID_CLIENTE_LAAS" type="BIGINT"><constraints nullable="false"/></column>

        </createTable>

        <addForeignKeyConstraint baseColumnNames="ID_CONTA" baseTableName="MOVIMENTO_FINANCEIRO"  constraintName="ID_CONTA_MOVIMENTO_FINANCEIRO" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_CONTA" referencedTableName="CONTA" />
        <addForeignKeyConstraint baseColumnNames="CX_DESCRICAO_MOVIMENTO" baseTableName="MOVIMENTO_FINANCEIRO"  constraintName="CX_DESCRICAO_MOVIMENTO_MOVIMENTO_FINANCEIRO" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_ITEM_CONJ_VALORES" referencedTableName="ITEM_CONJ_VALORES" />
        <addForeignKeyConstraint baseColumnNames="CX_TIPO_MOEDA" baseTableName="MOVIMENTO_FINANCEIRO"  constraintName="CX_CATGORIA_MOVIMENTO_MOVIMENTO_FINANCEIRO" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_ITEM_CONJ_VALORES" referencedTableName="ITEM_CONJ_VALORES" />
        <addForeignKeyConstraint baseColumnNames="ID_USUARIO" baseTableName="MOVIMENTO_FINANCEIRO"  constraintName="ID_USUARIO_MOVIMENTO_FINANCEIRO" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_USUARIO_OU_GRUPO" referencedTableName="USUARIO_OU_GRUPO" />
        <addForeignKeyConstraint baseColumnNames="ID_CLIENTE_LAAS" baseTableName="MOVIMENTO_FINANCEIRO"  constraintName="FK_MOVIMENTO_FINANCEIRO_CLIENTE_LAAS" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_CLIENTE_LAAS" referencedTableName="CLIENTE_LAAS" />


        <addForeignKeyConstraint baseColumnNames="ID_MOVIMENTO_FINANCEIRO" baseTableName="CONTA"  constraintName="ID_MOVIMENTO_FINANCEIRO_CONTA" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_MOVIMENTO_FINANCEIRO" referencedTableName="MOVIMENTO_FINANCEIRO" />
        <addForeignKeyConstraint baseColumnNames="CX_CATEGORIA_MOVIMENTO" baseTableName="CONTA"  constraintName="CX_CATGORIA_MOVIMENTO_CONTA" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_ITEM_CONJ_VALORES" referencedTableName="ITEM_CONJ_VALORES" />
        <addForeignKeyConstraint baseColumnNames="CX_TIPO_DOCUMENTO" baseTableName="CONTA"  constraintName="CX_TIPO_DOCUMENTO_CONTA" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_ITEM_CONJ_VALORES" referencedTableName="ITEM_CONJ_VALORES" />
        <addForeignKeyConstraint baseColumnNames="ID_USUARIO_PAGAMENTO" baseTableName="CONTA"  constraintName="ID_USUARIO_PAGAMENTO_CONTA" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_USUARIO_OU_GRUPO" referencedTableName="USUARIO_OU_GRUPO" />
        <addForeignKeyConstraint baseColumnNames="ID_CLIENTE_LAAS" baseTableName="CONTA"  constraintName="FK_CONTA_CLIENTE_LAAS" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_CLIENTE_LAAS" referencedTableName="CLIENTE_LAAS" />
        <addForeignKeyConstraint baseColumnNames="ID_CONTA_BANCARIA" baseTableName="CONTA"  constraintName="FK_ID_CONTA_BANCARIA_CONTA" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID_CONTA_BANCARIA" referencedTableName="CONTA_BANCARIA" />

            <!--### Conjunto de Valores #### -->
            <insert tableName="CONJ_VALORES">
                <column name="TX_DESCRICAO_CONJ_VALORES" value="Descrição do Movimento Financeiro"/>
                <column name="TS_ULT_MODIFICACAO" valueComputed="${CURRENT_TIMESTAMP}"/>
            </insert>

            <!--### Conjunto de Valores #### -->
            <insert tableName="CONJ_VALORES">
                <column name="TX_DESCRICAO_CONJ_VALORES" value="Categoria do Movimento Financeiro"/>
                <column name="TS_ULT_MODIFICACAO" valueComputed="${CURRENT_TIMESTAMP}"/>
            </insert>

            <!--### Conjunto de Valores #### -->
            <insert tableName="CONJ_VALORES">
                <column name="TX_DESCRICAO_CONJ_VALORES" value="Tipo de Documento"/>
                <column name="TS_ULT_MODIFICACAO" valueComputed="${CURRENT_TIMESTAMP}"/>
            </insert>

            <!--### Conjunto de Valores #### -->
            <insert tableName="CONJ_VALORES">
                <column name="TX_DESCRICAO_CONJ_VALORES" value="Moeda"/>
                <column name="TS_ULT_MODIFICACAO" valueComputed="${CURRENT_TIMESTAMP}"/>
            </insert>

            <insert tableName="TIPO_CADASTRO">    <!-- ID = 27 -->
                <column name="TX_NOME_TIPO_CADASTRO" value="Movimento Financeiro"/>
                <column name="TX_NOME_CLASSE" value="MovimentoFinanceiro"/>
            </insert>

            <!-- #### Funcionalidade ####-->

            <insert tableName="FUNCIONALIDADE">   <!--ID= 20 -->
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="TX_FUNCIONALIDADE" value="Cadastro de Movimento Financeiro"/>
                <column name="TX_NOME_CLASSE" value="MovimentoFinanceiro"/>
            </insert>

            <!--####### Funcionalidade e Operação ########-->

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="A"/>
            </insert>

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="C"/>
            </insert>

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="E"/>
            </insert>

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="I"/>
            </insert>

            <!--###### Permissão #####-->

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="I"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="A"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="C"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="27"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="20"/>
                <column name="ID_OPERACAO" value="E"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <!-- ################################ Conta A Pagar ##########################-->

            <insert tableName="TIPO_CADASTRO">    <!-- ID = 28 -->
                <column name="TX_NOME_TIPO_CADASTRO" value="Conta a Pagar"/>
                <column name="TX_NOME_CLASSE" value="ContaAPagar"/>
            </insert>

            <!-- #### Funcionalidade ####-->

            <insert tableName="FUNCIONALIDADE">   <!--ID= 21 -->
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="TX_FUNCIONALIDADE" value="Cadastro de Conta a Pagar"/>
                <column name="TX_NOME_CLASSE" value="ContaAPagar"/>
            </insert>

            <!--####### Funcionalidade e Operação ########-->

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="A"/>
            </insert>

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="C"/>
            </insert>

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="E"/>
            </insert>

            <insert tableName="FUNCIONALIDADE_OPERACAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="I"/>
            </insert>

            <!--###### Permissão #####-->

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="I"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="A"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="C"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

            <insert tableName="PERMISSAO">
                <column name="ID_TIPO_CADASTRO" valueNumeric="28"/>
                <column name="ID_FUNCIONALIDADE" valueNumeric="21"/>
                <column name="ID_OPERACAO" value="E"/>
                <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
            </insert>

        <!-- ################################ CONTA A RECEBR ##########################-->

        <insert tableName="TIPO_CADASTRO">    <!-- ID = 29 -->
            <column name="TX_NOME_TIPO_CADASTRO" value="Conta a Receber"/>
            <column name="TX_NOME_CLASSE" value="ContaAReceber"/>
        </insert>

        <!-- #### Funcionalidade ####-->

        <insert tableName="FUNCIONALIDADE">   <!--ID= 22 -->
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="TX_FUNCIONALIDADE" value="Cadastro de Conta a Receber"/>
            <column name="TX_NOME_CLASSE" value="ContaAReceber"/>
        </insert>

        <!--####### Funcionalidade e Operação ########-->

        <insert tableName="FUNCIONALIDADE_OPERACAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="A"/>
        </insert>

        <insert tableName="FUNCIONALIDADE_OPERACAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="C"/>
        </insert>

        <insert tableName="FUNCIONALIDADE_OPERACAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="E"/>
        </insert>

        <insert tableName="FUNCIONALIDADE_OPERACAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="I"/>
        </insert>

        <!--###### Permissão #####-->

        <insert tableName="PERMISSAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="I"/>
            <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
        </insert>

        <insert tableName="PERMISSAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="A"/>
            <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
        </insert>

        <insert tableName="PERMISSAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="C"/>
            <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
        </insert>

        <insert tableName="PERMISSAO">
            <column name="ID_TIPO_CADASTRO" valueNumeric="29"/>
            <column name="ID_FUNCIONALIDADE" valueNumeric="22"/>
            <column name="ID_OPERACAO" value="E"/>
            <column name="ID_USUARIO_OU_GRUPO" valueNumeric="1"/>
        </insert>

    </changeSet>
</databaseChangeLog>

